<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="canonical" href="https://www.borderlyvisa.in/" />
    <title>Apply for a Visa - Borderly</title>
    <meta
      name="description"
      content="Borderly Visa offers immigration services with integrity, transparency, and professionalism."
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lexend:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="module" src="./main.js"></script>
    <link rel="stylesheet" href="src/visa.css" />
    <script src="src/visa.js"></script>

    <style>
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }

      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
    </style>
  </head>

  <body class="text-slate-800 overflow-x-hidden">
    <header class="bg-white shadow-sm sticky top-0 z-40">
      <nav
        class="container mx-auto px-6 py-4 flex justify-between items-center"
      >
        <h1 class="text-3xl font-bold text-slate-900">
          <a href="/">Borderly</a>
        </h1>

        <div class="hidden md:flex items-center space-x-8">
          <a
            href="index.html#about"
            class="text-slate-600 hover:text-slate-900 transition-colors"
            >About Us</a
          >
          <a
            href="./blog.html"
            class="text-slate-600 hover:text-slate-900 transition-colors"
            >Blog</a
          >
          <a
            href="index.html#services"
            class="text-slate-600 hover:text-slate-900 transition-colors"
            >Services</a
          >
          <a
            href="index.html#features"
            class="text-slate-600 hover:text-slate-900 transition-colors"
            >Why Choose Us</a
          >
          <a
            href="index.html#contact"
            class="text-slate-600 hover:text-slate-900 transition-colors"
            >Contact</a
          >
        </div>
        <a
          href="apply.html"
          class="hidden md:block bg-slate-900 text-white font-semibold px-5 py-2 rounded-lg hover:bg-slate-700 transition-colors"
        >
          Apply Now
        </a>

        <div class="md:hidden">
          <button
            id="mobile-menu-button"
            class="text-slate-900 focus:outline-none"
          >
            <svg
              class="h-6 w-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16m-7 6h7"
              ></path>
            </svg>
          </button>
        </div>
      </nav>

      <div id="mobile-menu" class="hidden md:hidden bg-white">
        <a
          href="index.html#about"
          class="block py-3 px-6 text-sm text-slate-600 hover:bg-slate-50"
          >About Us</a
        >
        <a
          href="./blog.html"
          class="block py-3 px-6 text-sm text-slate-600 hover:bg-slate-50"
          >Blog</a
        >
        <a
          href="index.html#services"
          class="block py-3 px-6 text-sm text-slate-600 hover:bg-slate-50"
          >Services</a
        >
        <a
          href="index.html#features"
          class="block py-3 px-6 text-sm text-slate-600 hover:bg-slate-50"
          >Why Choose Us</a
        >
        <a
          href="index.html#contact"
          class="block py-3 px-6 text-sm text-slate-600 hover:bg-slate-50"
          >Contact</a
        >
        <div class="px-6 py-4">
          <a
            href="apply.html"
            class="block w-full text-center bg-slate-900 text-white font-semibold px-5 py-2 rounded-lg hover:bg-slate-700 transition-colors"
          >
            Apply Now
          </a>
        </div>
      </div>
    </header>

    <main class="container mx-auto px-6 py-12">
      <section class="apply-form">
        <div id="initial-form-section">
          <h1 class="text-3xl font-bold text-slate-900">Apply for Your Visa</h1>
          <p class="mt-4 text-slate-600">
            Fill out the form below to start your visa application process.
          </p>
          <form id="visa-application-form" class="mt-8">
            <div class="form-group">
              <label
                for="full-name"
                class="block text-sm font-medium text-slate-700"
                >Full Name</label
              >
              <input
                type="text"
                id="full-name"
                name="full-name"
                required
                class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm"
              />
            </div>
            <div class="form-group">
              <label for="email" class="block text-sm font-medium text-slate-700"
                >Email</label
              >
              <input
                type="email"
                id="email"
                name="email"
                required
                class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm"
              />
            </div>
            <div class="form-group">
              <label
                for="citizenship"
                class="block text-sm font-medium text-slate-700"
                >Country of Citizenship</label
              >
              <input
                type="text"
                id="citizenship"
                name="citizenship"
                required
                class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm"
              />
            </div>
            <div class="form-group">
              <label
                for="destination"
                class="block text-sm font-medium text-slate-700"
                >Destination Country</label
              >
              <input
                type="text"
                id="destination"
                name="destination"
                required
                class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm"
              />
            </div>
            <div class="form-group">
              <label
                for="purpose-of-visit"
                class="block text-sm font-medium text-slate-700"
                >Purpose of Visit</label
              >
              <input
                type="text"
                id="purpose-of-visit"
                name="purpose-of-visit"
                required
                class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm"
              />
            </div>
            <div class="form-group">
              <label
                for="travel-dates"
                class="block text-sm font-medium text-slate-700"
                >Travel Dates</label
              >
              <input
                type="text"
                id="travel-dates"
                placeholder="01/06/2025 - 30/07/2025"
                name="travel-dates"
                required
                class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm"
              />
            </div>
            <button
              type="submit"
              class="w-full bg-slate-900 text-white font-semibold px-5 py-3 rounded-lg hover:bg-slate-700 transition-colors"
            >
              Submit Application
            </button>
          </form>
        </div>

        <section
          id="document-upload-section"
          class="mt-8"
          style="display: none"
        >
          <h2 class="text-2xl font-bold text-slate-900 mb-4">
            Upload Your Documents
          </h2>
          <p class="mt-4 text-slate-600">
            Please upload your passport and Aadhar card (PDF). We use this info
            to get you your visa.
          </p>
          <div class="form-group mt-4">
            <label
              for="passport-file"
              class="block text-sm font-medium text-slate-700"
              >Passport</label
            >
            <input
              type="file"
              id="passport-file"
              name="passport-file"
              accept=".pdf"
              class="mt-1 block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-slate-50 file:text-slate-700 hover:file:bg-slate-100"
            />
          </div>
          <div class="form-group">
            <label
              for="aadhar-file"
              class="block text-sm font-medium text-slate-700"
              >Aadhar Card</label
            >
            <input
              type="file"
              id="aadhar-file"
              name="aadhar-file"
              accept=".pdf"
              class="mt-1 block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-slate-50 file:text-slate-700 hover:file:bg-slate-100"
            />
          </div>
          <button
            id="submit-documents-btn"
            class="w-full bg-slate-900 text-white font-semibold px-5 py-3 rounded-lg hover:bg-slate-700 transition-colors"
          >
            Submit Documents
          </button>
        </section>

        <section id="payment-section" class="mt-8" style="display: none">
          <h2 class="text-2xl font-bold text-slate-900 mb-4">
            Complete Your Payment
          </h2>
          <p class="mt-4 text-slate-600">
            Please complete the payment to finalize your application.
          </p>
          <div class="mt-6 flex justify-center">
            <a
              href="upi://pay?pa=simonbijuthumbeparambil-2@okhdfcbank&pn=borderlyvisa&am=5500&cu=INR"
              class="bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg transition-colors"
            >
              Pay Now
            </a>
          </div>
          <button
            id="payment-continue-btn"
            class="mt-4 w-full bg-slate-900 text-white font-semibold px-5 py-3 rounded-lg hover:bg-slate-700 transition-colors"
          >
            Continue
          </button>
        </section>
      </section>
    </main>

    <footer class="bg-slate-900 text-slate-300">
      <div class="w-full py-12 text-center">
        <h2 class="text-2xl font-bold text-white">Borderly</h2>
        <div class="mt-6 flex justify-center flex-wrap gap-6">
          <a href="index.html#about" class="hover:text-white transition-colors"
            >About</a
          >
          <a
            href="index.html#services"
            class="hover:text-white transition-colors"
            >Services</a
          >
          <a href="blog.html" class="hover:text-white transition-colors"
            >Blog</a
          >
          <a
            href="index.html#features"
            class="hover:text-white transition-colors"
            >Features</a
          >
          <a
            href="index.html#contact"
            class="hover:text-white transition-colors"
            >Contact</a
          >
          <a href="/policy.html" class="hover:text-white transition-colors"
            >Refund & Service Policy</a
          >
        </div>
        <p class="mt-8 text-sm text-slate-400">
          Â© 2025 Borderly Visa. All rights reserved.
        </p>
      </div>
    </footer>

    <div
      id="overlay"
      class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"
    ></div>
    <div id="modal-container">
      <div
        id="auth-modal"
        class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center"
      >
        <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
          <div class="flex justify-between items-center mb-6">
            <h2 id="modal-title" class="text-2xl font-bold text-slate-900">
              Log In
            </h2>
            <button id="close-modal-button" class="text-slate-500 hover:text-slate-800">
              <svg
                class="h-6 w-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                ></path>
              </svg>
            </button>
          </div>
          <form id="auth-form" class="space-y-4">
            <div>
              <label for="email" class="block text-sm font-medium text-slate-700"
                >Email Address</label
              >
              <input
                type="email"
                id="auth-email"
                name="email"
                required
                class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm"
              />
            </div>
            <div>
              <label
                for="password"
                class="block text-sm font-medium text-slate-700"
                >Password</label
              >
              <input
                type="password"
                id="auth-password"
                name="password"
                required
                class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm"
              />
            </div>
            <p
              id="auth-message"
              class="text-center text-red-500 text-sm hidden"
            ></p>
            <button
              type="submit"
              id="auth-submit-button"
              class="w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-900 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-colors"
            >
              Log In
            </button>
          </form>
          <p class="mt-4 text-center text-sm text-slate-600">
            <span id="auth-prompt-text">Don't have an account?</span>
            <button
              id="auth-toggle-button"
              class="font-medium text-slate-900 hover:underline"
            >
              Sign Up
            </button>
          </p>
        </div>
      </div>
    </div>

    <div class="fixed bottom-6 right-6 z-50">
      <a
        href="https://wa.me/9048955437"
        target="_blank"
        rel="noopener noreferrer"
        class="bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg flex items-center justify-center transition-transform hover:scale-110"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="28"
          height="28"
          viewBox="0 0 24 24"
          fill="currentColor"
        >
          <path
            d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.371-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01s-.521.074-.792.372c-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.626.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"
          />
        </svg>
      </a>
    </div>

    <script type="module">
      import supabase from "./src/supabase-client.js"
      import { redirectTo, showAuthModal } from "./src/ui.js"

      const visaApplicationForm = document.getElementById(
        "visa-application-form",
      )
      const initialFormSection = document.getElementById("initial-form-section")
      const documentUploadSection = document.getElementById(
        "document-upload-section",
      )
      const paymentSection = document.getElementById("payment-section")
      const submitDocumentsBtn = document.getElementById("submit-documents-btn")
      const paymentContinueBtn = document.getElementById("payment-continue-btn")
      const passportFile = document.getElementById("passport-file")
      const aadharFile = document.getElementById("aadhar-file")
      let applicationId

      visaApplicationForm.addEventListener("submit", async function (event) {
        event.preventDefault()

        const {
          data: { user },
        } = await supabase.auth.getUser()
        if (!user) {
          showAuthModal()
          return
        }

        const formData = new FormData(visaApplicationForm)
        const applicationData = {
          user_id: user.id,
          full_name: formData.get("full-name"),
          email: formData.get("email"),
          citizenship: formData.get("citizenship"),
          destination: formData.get("destination"),
          purpose: formData.get("purpose-of-visit"),
          travel_dates: formData.get("travel-dates"),
          status: "Submitted",
        }

        const { data, error } = await supabase
          .from("applications")
          .insert([applicationData])
          .select()

        if (error) {
          alert("Error submitting application: " + error.message)
          return
        }

        applicationId = data[0].id
        initialFormSection.style.display = "none"
        documentUploadSection.style.display = "block"
      })

      submitDocumentsBtn.addEventListener("click", async function () {
        const passport = passportFile.files[0]
        const aadhar = aadharFile.files[0]

        if (!passport || !aadhar) {
          alert("Please select both passport and Aadhar card files.")
          return
        }

        try {
          // Upload Passport
          const { data: passportData, error: passportError } =
            await supabase.storage
              .from("visa-documents")
              .upload(`${applicationId}/passport.pdf`, passport)

          if (passportError) {
            throw passportError
          }

          // Upload Aadhar
          const { data: aadharData, error: aadharError } =
            await supabase.storage
              .from("visa-documents")
              .upload(`${applicationId}/aadhar.pdf`, aadhar)

          if (aadharError) {
            throw aadharError
          }

          const {
            data: { user },
          } = await supabase.auth.getUser()

          const { data: files, error: listError } = await supabase.storage
            .from("visa-documents")
            .list(`${applicationId}`)

          if (listError) throw listError

          for (const file of files) {
            const { data: object, error: objectError } = await supabase.storage
              .from("visa-documents")
              .getPublicUrl(`${applicationId}/${file.name}`)

            if (objectError) throw objectError

            const objectId = object.publicUrl.split("/").slice(-1)[0]

            const { error: insertError } = await supabase
              .from("application_files")
              .insert([
                {
                  object_id: objectId,
                  application_id: applicationId,
                  user_id: user.id,
                },
              ])

            if (insertError) throw insertError
          }

          documentUploadSection.style.display = "none"
          paymentSection.style.display = "block"
        } catch (error) {
          alert("Error submitting documents: " + error.message)
          console.error("Error submitting documents:", error)
        }
      })

      paymentContinueBtn.addEventListener("click", function () {
        redirectTo("/status.html")
      })
    </script>
  </body>
</html>
